# Learn2Grow PM2 Management Guide

## Overview

This document explains how to use PM2 to manage the Learn2Grow platform's services, particularly the automated email system.

## What is PM2?

PM2 is a process manager for Node.js applications. It keeps your applications running in the background, automatically restarts them if they crash, and can start them automatically when your system boots.

## Managing Services

We've created PowerShell scripts to make it easy to manage all Learn2Grow services:

### Basic Commands

```powershell
# Start all services
./manage-services.ps1 start

# Stop all services
./manage-services.ps1 stop

# Restart all services
./manage-services.ps1 restart

# Check status of all services
./manage-services.ps1 status
```

### Monitoring and Logs

```powershell
# View all logs (real-time)
./manage-services.ps1 logs

# View only email service logs
./manage-services.ps1 email-logs

# Open interactive monitoring dashboard
./manage-services.ps1 monit
```

### Email Processing

```powershell
# Process pending emails once
./manage-services.ps1 email

# Or use the dedicated email processing script:
./process-emails.ps1
```

## Email Processing Script

For more control over email processing, use the dedicated script:

```powershell
# Process all pending emails
./process-emails.ps1

# Process emails for a specific recipient
./process-emails.ps1 -email user@example.com

# Force reprocessing of all emails
./process-emails.ps1 -force

# Send verification emails to all pending recipients
./process-emails.ps1 -verifyAll
```

## Starting on System Boot

To configure PM2 to start services automatically when your system boots:

```powershell
# First save the current process list
./manage-services.ps1 save

# Then set up PM2 startup
pm2 startup

# Follow the instructions provided by the command
# This will usually require you to run a command with administrator privileges
```

## Troubleshooting

If you encounter issues:

1. Check the logs: `./manage-services.ps1 logs`
2. Restart the services: `./manage-services.ps1 restart`
3. If necessary, stop all services and start them again:
   ```powershell
   ./manage-services.ps1 stop
   ./manage-services.ps1 start
   ```

All logs are stored in the `logs` directory for further investigation.
